# Copyright 2020 Peter Dimov
# Distributed under the Boost Software License, Version 1.0.
# https://www.boost.org/LICENSE_1_0.txt

import testing ;
import ../../config/checks/config : requires ;

project : requirements
  <warnings>extra
  <toolset>msvc:<warnings-as-errors>on
  <toolset>clang:<warnings-as-errors>on
  <toolset>gcc:<warnings-as-errors>on
  <toolset>msvc-14.0:<cxxflags>"-wd4100"
  <toolset>clang:<cxxflags>"-Wno-unused-private-field" ;

run quick.cpp ;

run pp_for_each_test.cpp ;

run enumerators_test.cpp ;
run bases_test.cpp ;
run members_test.cpp ;
run members_test2.cpp ;
run members_test3.cpp ;
run members_test4.cpp ;
run members_test5.cpp ;
run members_test6.cpp ;
run members_test7.cpp : : : <toolset>msvc-14.0:<build>no ;

local CXX14 = [ requires cxx14_return_type_deduction cxx14_generic_lambdas ] ;

run ../example/printing_enums_ct.cpp : : : $(CXX14) ;
run ../example/printing_enums_rt.cpp : : : $(CXX14) ;
run ../example/enum_to_string.cpp : : : $(CXX14) ;
run ../example/string_to_enum.cpp : : : $(CXX14) ;
run ../example/print_function.cpp : : : $(CXX14) ;
run ../example/to_json.cpp /boost//json : : : $(CXX14) ;
run ../example/from_json.cpp /boost//json : : : $(CXX14) <toolset>msvc-14.0:<build>no ;
run ../example/serialization.cpp /boost//serialization/<warnings>off : : : $(CXX14) <toolset>clang:<cxxflags>"-Wno-unknown-pragmas" ;
run ../example/json_rpc.cpp /boost//json : : : $(CXX14) <toolset>msvc-14.0:<build>no ;
